{
	"variables": {
		"aws_access_key": "{{env `AWS_ACCESS_KEY`}}",
		"aws_secret_key": "{{env `AWS_SECRET_KEY`}}",
		"aws_ami": "ami-07585467",
		"aws_region": "us-west-1",
		"instance_type": "m4.xlarge",
		"ami_name_prefix": "ubuntu16.04-ch",
		"aws_vpc_id": "vpc-c843d1ac",
		"aws_security_group_id": "sg-2ae9e74d",
		"aws_subnet_id": "subnet-a6e9adfe"
	},
	"builders": [
		{
			"type": "amazon-ebs",
			"access_key": "{{user `aws_access_key`}}",
			"secret_key": "{{user `aws_secret_key`}}",
			"region": "{{user `aws_region`}}",
			"vpc_id": "{{user `aws_vpc_id`}}",
			"subnet_id": "{{user `aws_subnet_id`}}",
			"security_group_id": "{{user `aws_security_group_id`}}",
			"source_ami": "{{user `aws_ami`}}",
			"instance_type": "{{user `instance_type`}}",
			"ssh_username": "ubuntu",
			"ami_name": "{{user `ami_name_prefix`}}-{{isotime | clean_ami_name}}",
			"ami_description": "Ubuntu 16.06 Container Host Image",
			"launch_block_device_mappings": [
				{
					"device_name": "/dev/sda1",
					"volume_size": 50,
					"volume_type": "gp2",
					"delete_on_termination": true
				}
			],
			"tags": {
				"role": "cobalt-server-host"
			},
			"run_tags": {
				"role": "cobalt-server-host"
			}
		}
	],
	"provisioners": [
		{
			"type": "file",
			"source": "ansible",
			"destination": "/var/tmp/"
		},
		{
			"type": "file",
			"source": "ansible-roles",
			"destination": "/var/tmp/ansible/roles"
		},
		{
			"type": "shell",
			"script": "provision.sh"
		}
	]
}
